{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{bindActionCreators}from\"redux\";import{connect}from'react-redux';import{authEndpoint,clientId,redirectUri,scopes}from\"../config\";import{addToken,setUsername,setIsOwner}from\"../actions/userAction\";import'../styles/Home.css';import logo from'../logo.png';import $ from\"jquery\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){_classCallCheck(this,Home);return _super.apply(this,arguments);}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);while(e=r.exec(q)){hashParams[e[1]]=decodeURIComponent(e[2]);}if(hashParams.access_token){this.props.addToken(hashParams.access_token);}}},{key:\"getUsername\",value:function getUsername(){var _this=this;$.ajax({url:\"https://api.spotify.com/v1/me/\",type:\"GET\",beforeSend:function beforeSend(xhr){xhr.setRequestHeader(\"Authorization\",\"Bearer \"+_this.props.token);},success:function success(data){_this.props.setUsername(data.display_name);console.log(data.display_name);}});}},{key:\"createGroup\",value:function createGroup(){this.props.setIsOwner(true);this.props.history.push('/start');}},{key:\"joinGroup\",value:function joinGroup(){this.props.setIsOwner(false);this.props.history.push('/start');}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"Home\"},/*#__PURE__*/React.createElement(\"header\",{className:\"Home-header\"},/*#__PURE__*/React.createElement(\"img\",{src:logo,className:\"Home-logo\",alt:\"logo\"}),!this.props.token&&/*#__PURE__*/React.createElement(\"a\",{className:\"Home-btn\",href:\"\".concat(authEndpoint,\"?client_id=\").concat(clientId,\"&redirect_uri=\").concat(redirectUri,\"&scope=\").concat(scopes.join(\"%20\"),\"&response_type=token&show_dialog=true\")},\"Login to Spotify\"),this.props.token&&/*#__PURE__*/React.createElement(\"div\",{className:\"Home-btnDiv\"},this.getUsername(),/*#__PURE__*/React.createElement(\"p\",{className:\"Home-text\"},\"Create a new group that friends can join.\"),/*#__PURE__*/React.createElement(\"button\",{className:\"Home-createBtn\",onClick:this.createGroup.bind(this)},\"Create a Group\"),/*#__PURE__*/React.createElement(\"p\",{className:\"Home-text\"},\"Join a group that already exists.\"),/*#__PURE__*/React.createElement(\"button\",{className:\"Home-joinBtn\",onClick:this.joinGroup.bind(this)},\"Join a Group\")),/*#__PURE__*/React.createElement(\"p\",{className:\"Home-p\"},\"Created By Kyle Litton. \",/*#__PURE__*/React.createElement(\"a\",{className:\"Home-credit\",href:\"https://github.com/jkl1999/ListenTogether\"},\"View Source\"))));}}]);return Home;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({addToken:addToken,setUsername:setUsername,setIsOwner:setIsOwner},dispatch);};var mapStateToProps=function mapStateToProps(state){return{token:state.userReducer.token,username:state.userReducer.username};};export default connect(mapStateToProps,mapDispatchToProps)(Home);","map":{"version":3,"sources":["C:/Users/99kyl/ListenTogether/src/components/Home.js"],"names":["React","Component","bindActionCreators","connect","authEndpoint","clientId","redirectUri","scopes","addToken","setUsername","setIsOwner","logo","$","Home","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","access_token","props","ajax","url","type","beforeSend","xhr","setRequestHeader","token","success","data","display_name","console","log","history","push","join","getUsername","createGroup","bind","joinGroup","mapDispatchToProps","dispatch","mapStateToProps","state","userReducer","username"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from 'react-redux';\r\nimport { authEndpoint, clientId, redirectUri, scopes } from \"../config\";\r\nimport { addToken, setUsername, setIsOwner } from \"../actions/userAction\"\r\nimport '../styles/Home.css';\r\nimport logo from '../logo.png'\r\nimport $ from \"jquery\";\r\n  \r\n  \r\nclass Home extends Component {\r\n\r\n  componentDidMount() {\r\n    let hashParams = {};\r\n    let e,\r\n      r = /([^&;=]+)=?([^&;]*)/g,\r\n      q = window.location.hash.substring(1);\r\n    while ((e = r.exec(q))) {\r\n      hashParams[e[1]] = decodeURIComponent(e[2]);\r\n    }\r\n\r\n    if (hashParams.access_token) {\r\n      this.props.addToken(hashParams.access_token);\r\n    } \r\n  }\r\n  \r\n  getUsername(){\r\n   $.ajax({\r\n      url: \"https://api.spotify.com/v1/me/\",\r\n      type: \"GET\",\r\n      beforeSend: xhr => {\r\n        xhr.setRequestHeader(\"Authorization\", \"Bearer \" + this.props.token);\r\n      },\r\n      success: data => {\r\n          this.props.setUsername(data.display_name);\r\n          console.log(data.display_name)\r\n      },\r\n    });\r\n  }\r\n\r\n  createGroup(){\r\n    this.props.setIsOwner(true);\r\n    this.props.history.push('/start');\r\n  }\r\n\r\n  joinGroup(){\r\n    this.props.setIsOwner(false);\r\n    this.props.history.push('/start');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Home\">\r\n        <header className=\"Home-header\">\r\n        <img src={logo} className=\"Home-logo\" alt=\"logo\"/>\r\n          {!this.props.token && (\r\n            <a\r\n              className=\"Home-btn\"\r\n              href={`${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\r\n                \"%20\"\r\n              )}&response_type=token&show_dialog=true`}\r\n            >\r\n              Login to Spotify\r\n            </a>\r\n          )}\r\n          {this.props.token && (\r\n            <div className=\"Home-btnDiv\">\r\n                {this.getUsername()}\r\n                <p className=\"Home-text\">Create a new group that friends can join.</p>\r\n                <button className=\"Home-createBtn\" onClick={this.createGroup.bind(this)}>Create a Group</button>\r\n                <p className=\"Home-text\">Join a group that already exists.</p>\r\n                <button className=\"Home-joinBtn\" onClick={this.joinGroup.bind(this)}>Join a Group</button>\r\n                \r\n            </div>\r\n          )}\r\n          <p className=\"Home-p\">\r\n            Created By Kyle Litton. <a className=\"Home-credit\" href='https://github.com/jkl1999/ListenTogether'>View Source</a>\r\n          </p>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      addToken,\r\n      setUsername,\r\n      setIsOwner\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      token: state.userReducer.token,\r\n      username: state.userReducer.username\r\n    };\r\n  };\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);"]},"metadata":{},"sourceType":"module"}