{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\client\\\\src\\\\components\\\\Home.js\";\nimport React, { Component } from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from 'react-redux';\nimport { authEndpoint, clientId, redirectUri, scopes } from \"../config\";\nimport { addToken, setUsername, setIsOwner } from \"../actions/userAction\";\nimport '../styles/Home.css';\nimport logo from '../logo.png';\nimport $ from \"jquery\";\n\nclass Home extends Component {\n  componentDidMount() {\n    let hashParams = {};\n    let e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n\n    while (e = r.exec(q)) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n\n    if (hashParams.access_token) {\n      this.props.addToken(hashParams.access_token);\n    }\n  }\n\n  getUsername() {\n    $.ajax({\n      url: \"https://api.spotify.com/v1/me/\",\n      type: \"GET\",\n      beforeSend: xhr => {\n        xhr.setRequestHeader(\"Authorization\", \"Bearer \" + this.props.token);\n      },\n      success: data => {\n        this.props.setUsername(data.display_name);\n        console.log(data.display_name);\n      }\n    });\n  }\n\n  createGroup() {\n    this.props.setIsOwner(true);\n    this.props.history.push('/start');\n  }\n\n  joinGroup() {\n    this.props.setIsOwner(false);\n    this.props.history.push('/start');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"Home-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo,\n      className: \"Home-logo\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }), !this.props.token && /*#__PURE__*/React.createElement(\"a\", {\n      className: \"Home-btn\",\n      href: `${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\"%20\")}&response_type=token&show_dialog=true`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, \"Login to Spotify\"), this.props.token && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Home-btnDiv\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, this.getUsername(), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"Home-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }, \"Create a new group that friends can join.\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"Home-createBtn\",\n      onClick: this.createGroup.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, \"Create a Group\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"Home-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }\n    }, \"Join a group that already exists.\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"Home-joinBtn\",\n      onClick: this.joinGroup.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }\n    }, \"Join a Group\")), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"Home-p\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, \"Created By Kyle Litton. \", /*#__PURE__*/React.createElement(\"a\", {\n      className: \"Home-credit\",\n      href: \"https://github.com/jkl1999/ListenTogether\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 37\n      }\n    }, \"View Source\"))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return bindActionCreators({\n    addToken,\n    setUsername,\n    setIsOwner\n  }, dispatch);\n};\n\nconst mapStateToProps = state => {\n  return {\n    token: state.userReducer.token,\n    username: state.userReducer.username\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);","map":{"version":3,"sources":["C:/Users/99kyl/ListenTogether/client/src/components/Home.js"],"names":["React","Component","bindActionCreators","connect","authEndpoint","clientId","redirectUri","scopes","addToken","setUsername","setIsOwner","logo","$","Home","componentDidMount","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","access_token","props","getUsername","ajax","url","type","beforeSend","xhr","setRequestHeader","token","success","data","display_name","console","log","createGroup","history","push","joinGroup","render","join","bind","mapDispatchToProps","dispatch","mapStateToProps","state","userReducer","username"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from 'react-redux';\r\nimport { authEndpoint, clientId, redirectUri, scopes } from \"../config\";\r\nimport { addToken, setUsername, setIsOwner } from \"../actions/userAction\"\r\nimport '../styles/Home.css';\r\nimport logo from '../logo.png'\r\nimport $ from \"jquery\";\r\n  \r\n  \r\nclass Home extends Component {\r\n\r\n  componentDidMount() {\r\n    let hashParams = {};\r\n    let e,\r\n      r = /([^&;=]+)=?([^&;]*)/g,\r\n      q = window.location.hash.substring(1);\r\n    while ((e = r.exec(q))) {\r\n      hashParams[e[1]] = decodeURIComponent(e[2]);\r\n    }\r\n\r\n    if (hashParams.access_token) {\r\n      this.props.addToken(hashParams.access_token);\r\n    } \r\n  }\r\n  \r\n  getUsername(){\r\n   $.ajax({\r\n      url: \"https://api.spotify.com/v1/me/\",\r\n      type: \"GET\",\r\n      beforeSend: xhr => {\r\n        xhr.setRequestHeader(\"Authorization\", \"Bearer \" + this.props.token);\r\n      },\r\n      success: data => {\r\n          this.props.setUsername(data.display_name);\r\n          console.log(data.display_name)\r\n      },\r\n    });\r\n  }\r\n\r\n  createGroup(){\r\n    this.props.setIsOwner(true);\r\n    this.props.history.push('/start');\r\n  }\r\n\r\n  joinGroup(){\r\n    this.props.setIsOwner(false);\r\n    this.props.history.push('/start');\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"Home\">\r\n        <header className=\"Home-header\">\r\n        <img src={logo} className=\"Home-logo\" alt=\"logo\"/>\r\n          {!this.props.token && (\r\n            <a\r\n              className=\"Home-btn\"\r\n              href={`${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\r\n                \"%20\"\r\n              )}&response_type=token&show_dialog=true`}\r\n            >\r\n              Login to Spotify\r\n            </a>\r\n          )}\r\n          {this.props.token && (\r\n            <div className=\"Home-btnDiv\">\r\n                {this.getUsername()}\r\n                <p className=\"Home-text\">Create a new group that friends can join.</p>\r\n                <button className=\"Home-createBtn\" onClick={this.createGroup.bind(this)}>Create a Group</button>\r\n                <p className=\"Home-text\">Join a group that already exists.</p>\r\n                <button className=\"Home-joinBtn\" onClick={this.joinGroup.bind(this)}>Join a Group</button>\r\n                \r\n            </div>\r\n          )}\r\n          <p className=\"Home-p\">\r\n            Created By Kyle Litton. <a className=\"Home-credit\" href='https://github.com/jkl1999/ListenTogether'>View Source</a>\r\n          </p>\r\n        </header>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      addToken,\r\n      setUsername,\r\n      setIsOwner\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      token: state.userReducer.token,\r\n      username: state.userReducer.username\r\n    };\r\n  };\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);"]},"metadata":{},"sourceType":"module"}