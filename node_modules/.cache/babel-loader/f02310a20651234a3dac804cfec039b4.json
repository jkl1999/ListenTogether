{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\99kyl\\\\ListenTogether\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from'react-redux';import{bindActionCreators}from\"redux\";import{setGroup,setOwnerToken}from\"../actions/userAction\";import'../styles/CreateGroup.css';import logo from'../logo.png';import $ from\"jquery\";import{confirmAlert}from'react-confirm-alert';import'react-confirm-alert/src/react-confirm-alert.css';var CreateGroup=/*#__PURE__*/function(_Component){_inherits(CreateGroup,_Component);var _super=_createSuper(CreateGroup);function CreateGroup(){var _this;_classCallCheck(this,CreateGroup);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:[],intervalIsSet:false};_this.getDataFromDb=function(){fetch('https://listen-together-api.herokuapp.com/Groups/getData').then(function(data){return data.json();}).then(function(res){return _this.setState({data:res});}).then(console.log(_this.state.data));};_this.handleGroup=function(){var groupList=_this.state.data.map(function(data){return data.groupName;});if(groupList.includes(_this.props.group)){if(_this.props.isOwner){confirmAlert({title:'Group Already Exists',message:'Enter a name that is not already taken.',buttons:[{label:'OK'}]});}else{_this.props.setOwnerToken(_this.state.data.find(function(x){return x.groupName===_this.props.group;}).ownerToken);_this.props.history.push('/group');}}else{if(_this.props.isOwner){$.ajax({url:\"https://listen-together-api.herokuapp.com/Groups/putData\",type:\"POST\",data:JSON.stringify({groupName:_this.props.group,ownerName:_this.props.username,ownerToken:_this.props.token}),contentType:'application/json; charset=UTF-8',success:function success(){console.log(\"New Group Made: \"+_this.props.group);_this.props.setOwnerToken(_this.props.token);_this.props.history.push('/group');},error:function error(){confirmAlert({title:\"Error Creating Group \".concat(_this.props.group),message:'Try Again',buttons:[{label:'OK'}]});}});}else{confirmAlert({title:'Group Does Not Exist',message:'Make sure you spelled the name of the group correctly.',buttons:[{label:'OK'}]});}}};_this.handleInput=function(event){_this.props.setGroup(event.target.value);};return _this;}_createClass(CreateGroup,[{key:\"componentDidMount\",value:function componentDidMount(){this.getDataFromDb();if(!this.state.intervalIsSet){var interval=setInterval(this.getDataFromDb,1000);this.setState({intervalIsSet:interval});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.state.intervalIsSet){clearInterval(this.state.intervalIsSet);this.setState({intervalIsSet:null});}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"Create\"},/*#__PURE__*/React.createElement(\"header\",{className:\"Create-header\"},/*#__PURE__*/React.createElement(\"img\",{src:logo,className:\"Create-logo\",alt:\"logo\"}),/*#__PURE__*/React.createElement(\"p\",{className:\"Create-p\"},this.props.isOwner?'Create Group Name':'Enter Group Name'),/*#__PURE__*/React.createElement(\"form\",{className:\"Create-form\"},/*#__PURE__*/React.createElement(\"input\",{className:\"input\",type:\"text\",placeholder:\"Enter Name Here\",onChange:this.handleInput})),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{className:\"Create-startBtn\",onClick:this.handleGroup.bind(this)},this.props.isOwner?'Start Group':'Join Group'),/*#__PURE__*/React.createElement(\"p\",{className:\"Home-p\"},\"Created By Kyle Litton. \",/*#__PURE__*/React.createElement(\"a\",{className:\"Home-credit\",href:\"https://github.com/jkl1999/ListenTogether\"},\"View Source\"))));}}]);return CreateGroup;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return bindActionCreators({setGroup:setGroup,setOwnerToken:setOwnerToken},dispatch);};var mapStateToProps=function mapStateToProps(state){return{group:state.userReducer.group,token:state.userReducer.token,username:state.userReducer.username,isOwner:state.userReducer.isOwner,ownerToken:state.userReducer.ownerToken};};export default connect(mapStateToProps,mapDispatchToProps)(CreateGroup);","map":{"version":3,"sources":["C:/Users/99kyl/ListenTogether/src/components/CreateGroup.js"],"names":["React","Component","connect","bindActionCreators","setGroup","setOwnerToken","logo","$","confirmAlert","CreateGroup","state","data","intervalIsSet","getDataFromDb","fetch","then","json","res","setState","console","log","handleGroup","groupList","map","groupName","includes","props","group","isOwner","title","message","buttons","label","find","x","ownerToken","history","push","ajax","url","type","JSON","stringify","ownerName","username","token","contentType","success","error","handleInput","event","target","value","interval","setInterval","clearInterval","bind","mapDispatchToProps","dispatch","mapStateToProps","userReducer"],"mappings":"gmBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,OAASC,QAAT,CAAmBC,aAAnB,KAAwC,uBAAxC,CACA,MAAO,2BAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAASC,YAAT,KAA6B,qBAA7B,CACA,MAAO,iDAAP,C,GAEMC,CAAAA,W,+UAEFC,K,CAAQ,CACNC,IAAI,CAAE,EADA,CAENC,aAAa,CAAC,KAFR,C,OAqBNC,a,CAAgB,UAAM,CACpBC,KAAK,CAAC,0DAAD,CAAL,CACGC,IADH,CACQ,SAACJ,IAAD,QAAUA,CAAAA,IAAI,CAACK,IAAL,EAAV,EADR,EAEGD,IAFH,CAEQ,SAACE,GAAD,QAAS,OAAKC,QAAL,CAAc,CAAEP,IAAI,CAAEM,GAAR,CAAd,CAAT,EAFR,EAGGF,IAHH,CAGQI,OAAO,CAACC,GAAR,CAAY,MAAKV,KAAL,CAAWC,IAAvB,CAHR,EAID,C,OAEDU,W,CAAc,UAAM,CAClB,GAAIC,CAAAA,SAAS,CAAG,MAAKZ,KAAL,CAAWC,IAAX,CAAgBY,GAAhB,CAAoB,SAACZ,IAAD,QAAUA,CAAAA,IAAI,CAACa,SAAf,EAApB,CAAhB,CACA,GAAGF,SAAS,CAACG,QAAV,CAAmB,MAAKC,KAAL,CAAWC,KAA9B,CAAH,CACA,CACE,GAAG,MAAKD,KAAL,CAAWE,OAAd,CAAsB,CACpBpB,YAAY,CAAC,CACXqB,KAAK,CAAE,sBADI,CAEXC,OAAO,CAAE,yCAFE,CAGXC,OAAO,CAAE,CAAC,CAACC,KAAK,CAAE,IAAR,CAAD,CAHE,CAAD,CAAZ,CAKD,CAND,IAMK,CACH,MAAKN,KAAL,CAAWrB,aAAX,CAAyB,MAAKK,KAAL,CAAWC,IAAX,CAAgBsB,IAAhB,CAAqB,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACV,SAAF,GAAc,MAAKE,KAAL,CAAWC,KAA7B,EAAtB,EAA0DQ,UAAnF,EACA,MAAKT,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACD,CAEF,CAbD,IAcI,CACJ,GAAG,MAAKX,KAAL,CAAWE,OAAd,CAAsB,CAEpBrB,CAAC,CAAC+B,IAAF,CAAO,CACLC,GAAG,CAAE,0DADA,CAELC,IAAI,CAAE,MAFD,CAGL7B,IAAI,CAAE8B,IAAI,CAACC,SAAL,CAAe,CACnBlB,SAAS,CAAE,MAAKE,KAAL,CAAWC,KADH,CAEnBgB,SAAS,CAAE,MAAKjB,KAAL,CAAWkB,QAFH,CAGnBT,UAAU,CAAE,MAAKT,KAAL,CAAWmB,KAHJ,CAAf,CAHD,CAQLC,WAAW,CAAE,iCARR,CASLC,OAAO,CAAE,kBAAM,CACb5B,OAAO,CAACC,GAAR,CAAY,mBAAqB,MAAKM,KAAL,CAAWC,KAA5C,EACA,MAAKD,KAAL,CAAWrB,aAAX,CAAyB,MAAKqB,KAAL,CAAWmB,KAApC,EACA,MAAKnB,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB,EACD,CAbI,CAcLW,KAAK,CAAE,gBAAM,CACXxC,YAAY,CAAC,CACXqB,KAAK,gCAA0B,MAAKH,KAAL,CAAWC,KAArC,CADM,CAEXG,OAAO,CAAE,WAFE,CAGXC,OAAO,CAAE,CAAC,CAACC,KAAK,CAAE,IAAR,CAAD,CAHE,CAAD,CAAZ,CAKD,CApBI,CAAP,EAwBC,CA1BH,IA2BM,CACFxB,YAAY,CAAC,CACXqB,KAAK,CAAE,sBADI,CAEXC,OAAO,CAAE,wDAFE,CAGXC,OAAO,CAAE,CAAC,CAACC,KAAK,CAAE,IAAR,CAAD,CAHE,CAAD,CAAZ,CAKD,CACF,CAEF,C,OAEDiB,W,CAAc,SAACC,KAAD,CAAW,CACvB,MAAKxB,KAAL,CAAWtB,QAAX,CAAoB8C,KAAK,CAACC,MAAN,CAAaC,KAAjC,EACD,C,oGAhFiB,CAChB,KAAKvC,aAAL,GACA,GAAI,CAAC,KAAKH,KAAL,CAAWE,aAAhB,CAA+B,CAC7B,GAAIyC,CAAAA,QAAQ,CAAGC,WAAW,CAAC,KAAKzC,aAAN,CAAqB,IAArB,CAA1B,CACA,KAAKK,QAAL,CAAc,CAAEN,aAAa,CAAEyC,QAAjB,CAAd,EACD,CAEF,C,mEAEoB,CACnB,GAAI,KAAK3C,KAAL,CAAWE,aAAf,CAA8B,CAC5B2C,aAAa,CAAC,KAAK7C,KAAL,CAAWE,aAAZ,CAAb,CACA,KAAKM,QAAL,CAAc,CAAEN,aAAa,CAAE,IAAjB,CAAd,EACD,CACF,C,uCAoEQ,CACP,mBACE,2BAAK,SAAS,CAAC,QAAf,eACE,8BAAQ,SAAS,CAAC,eAAlB,eACA,2BAAK,GAAG,CAAEN,IAAV,CAAgB,SAAS,CAAC,aAA1B,CAAwC,GAAG,CAAC,MAA5C,EADA,cAGA,yBAAG,SAAS,CAAC,UAAb,EAAyB,KAAKoB,KAAL,CAAWE,OAAX,CAAqB,mBAArB,CAA2C,kBAApE,CAHA,cAKA,4BAAM,SAAS,CAAC,aAAhB,eACI,6BAAO,SAAS,CAAC,OAAjB,CACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,iBAFd,CAGE,QAAQ,CAAE,KAAKqB,WAHjB,EADJ,CALA,cAYC,8BAZD,cAaC,8BAAQ,SAAS,CAAC,iBAAlB,CAAoC,OAAO,CAAE,KAAK5B,WAAL,CAAiBmC,IAAjB,CAAsB,IAAtB,CAA7C,EAA2E,KAAK9B,KAAL,CAAWE,OAAX,CAAqB,aAArB,CAAqC,YAAhH,CAbD,cAeC,yBAAG,SAAS,CAAC,QAAb,0CACuB,yBAAG,SAAS,CAAC,aAAb,CAA2B,IAAI,CAAC,2CAAhC,gBADvB,CAfD,CADF,CADF,CAwBD,C,yBAlHmB3B,S,EAuH1B,GAAMwD,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACrC,MAAOvD,CAAAA,kBAAkB,CACvB,CACEC,QAAQ,CAARA,QADF,CAEEC,aAAa,CAAbA,aAFF,CADuB,CAKvBqD,QALuB,CAAzB,CAOD,CARD,CAUA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAjD,KAAK,CAAI,CAC7B,MAAO,CACLiB,KAAK,CAAEjB,KAAK,CAACkD,WAAN,CAAkBjC,KADpB,CAELkB,KAAK,CAAEnC,KAAK,CAACkD,WAAN,CAAkBf,KAFpB,CAGLD,QAAQ,CAAElC,KAAK,CAACkD,WAAN,CAAkBhB,QAHvB,CAILhB,OAAO,CAAElB,KAAK,CAACkD,WAAN,CAAkBhC,OAJtB,CAKLO,UAAU,CAAEzB,KAAK,CAACkD,WAAN,CAAkBzB,UALzB,CAAP,CAOD,CARH,CAUA,cAAejC,CAAAA,OAAO,CAACyD,eAAD,CAAkBF,kBAAlB,CAAP,CAA6ChD,WAA7C,CAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from \"redux\";\r\nimport { setGroup, setOwnerToken } from \"../actions/userAction\";\r\nimport '../styles/CreateGroup.css';\r\nimport logo from '../logo.png'\r\nimport $ from \"jquery\";\r\nimport { confirmAlert } from 'react-confirm-alert'; \r\nimport 'react-confirm-alert/src/react-confirm-alert.css';\r\n\r\nclass CreateGroup extends Component{\r\n\r\n    state = {\r\n      data: [],\r\n      intervalIsSet:false\r\n    }\r\n\r\n    componentDidMount() {    \r\n        this.getDataFromDb();\r\n        if (!this.state.intervalIsSet) {\r\n          let interval = setInterval(this.getDataFromDb, 1000);\r\n          this.setState({ intervalIsSet: interval });\r\n        }\r\n    \r\n      }\r\n    \r\n    componentWillUnmount() {\r\n        if (this.state.intervalIsSet) {\r\n          clearInterval(this.state.intervalIsSet);\r\n          this.setState({ intervalIsSet: null });\r\n        }\r\n      }\r\n    \r\n      getDataFromDb = () => {\r\n        fetch('https://listen-together-api.herokuapp.com/Groups/getData')\r\n          .then((data) => data.json())\r\n          .then((res) => this.setState({ data: res }))\r\n          .then(console.log(this.state.data));\r\n      };\r\n\r\n      handleGroup = () => {\r\n        let groupList = this.state.data.map((data) => data.groupName);\r\n        if(groupList.includes(this.props.group))\r\n        {\r\n          if(this.props.isOwner){\r\n            confirmAlert({\r\n              title: 'Group Already Exists',\r\n              message: 'Enter a name that is not already taken.',\r\n              buttons: [{label: 'OK'}]\r\n            });\r\n          }else{\r\n            this.props.setOwnerToken(this.state.data.find(x => x.groupName===this.props.group).ownerToken);\r\n            this.props.history.push('/group');\r\n          }\r\n          \r\n        }\r\n        else{\r\n        if(this.props.isOwner){\r\n\r\n          $.ajax({\r\n            url: \"https://listen-together-api.herokuapp.com/Groups/putData\",\r\n            type: \"POST\",\r\n            data: JSON.stringify({\r\n              groupName: this.props.group,\r\n              ownerName: this.props.username,\r\n              ownerToken: this.props.token \r\n            }),\r\n            contentType: 'application/json; charset=UTF-8',\r\n            success: () => {\r\n              console.log(\"New Group Made: \" + this.props.group);\r\n              this.props.setOwnerToken(this.props.token);\r\n              this.props.history.push('/group');\r\n            },\r\n            error: () => {\r\n              confirmAlert({\r\n                title: `Error Creating Group ${this.props.group}`,\r\n                message: 'Try Again',\r\n                buttons: [{label: 'OK'}]\r\n              })\r\n            }\r\n          });\r\n\r\n            \r\n          }\r\n          else{\r\n            confirmAlert({\r\n              title: 'Group Does Not Exist',\r\n              message: 'Make sure you spelled the name of the group correctly.',\r\n              buttons: [{label: 'OK'}]\r\n            });\r\n          }\r\n        }\r\n          \r\n      }\r\n\r\n      handleInput = (event) => {\r\n        this.props.setGroup(event.target.value);\r\n      }\r\n\r\n      render() {\r\n        return (\r\n          <div className=\"Create\">\r\n            <header className=\"Create-header\">\r\n            <img src={logo} className=\"Create-logo\" alt=\"logo\"/>\r\n            \r\n            <p className=\"Create-p\">{this.props.isOwner ? 'Create Group Name' : 'Enter Group Name'}</p>\r\n\r\n            <form className=\"Create-form\">\r\n                <input className='input'\r\n                  type='text'\r\n                  placeholder='Enter Name Here'\r\n                  onChange={this.handleInput}\r\n                />\r\n             </form>\r\n             <br></br>\r\n             <button className=\"Create-startBtn\" onClick={this.handleGroup.bind(this)}>{this.props.isOwner ? 'Start Group' : 'Join Group'}</button>\r\n\r\n             <p className=\"Home-p\">\r\n            Created By Kyle Litton. <a className=\"Home-credit\" href='https://github.com/jkl1999/ListenTogether'>View Source</a>\r\n            </p>\r\n            </header>\r\n            \r\n          </div>\r\n        );\r\n      }\r\n\r\n\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return bindActionCreators(\r\n    {\r\n      setGroup,\r\n      setOwnerToken\r\n    },\r\n    dispatch\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n      group: state.userReducer.group,\r\n      token: state.userReducer.token,\r\n      username: state.userReducer.username,\r\n      isOwner: state.userReducer.isOwner,\r\n      ownerToken: state.userReducer.ownerToken\r\n    };\r\n  };\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateGroup);"]},"metadata":{},"sourceType":"module"}